<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DUSH GROUP - Smart Inventory Management</title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>
                        </svg>
                    </div>
                    <span>DUSH GROUP</span>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <ul>
                    <li>
                        <a href="#" class="nav-link active" data-page="dashboard">
                            <i class="fas fa-home"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-page="pos" data-permission="process_sales">
                            <i class="fas fa-cash-register"></i>
                            <span>Point of Sale</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-page="products" data-permission="manage_products">
                            <i class="fas fa-boxes"></i>
                            <span>Products</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-page="categories" data-permission="manage_categories">
                            <i class="fas fa-tags"></i>
                            <span>Categories</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-page="customers" data-permission="manage_customers">
                            <i class="fas fa-users"></i>
                            <span>Customers</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-page="suppliers" data-permission="manage_suppliers">
                            <i class="fas fa-truck"></i>
                            <span>Suppliers</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-page="credit" data-permission="manage_credit_sales">
                            <i class="fas fa-credit-card"></i>
                            <span>Credit Sales</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-page="reports" data-permission="view_reports">
                            <i class="fas fa-chart-bar"></i>
                            <span>Reports</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-page="transactions">
                            <i class="fas fa-exchange-alt"></i>
                            <span>Transactions</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-page="users" data-permission="manage_users">
                            <i class="fas fa-user-cog"></i>
                            <span>Users</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-page="departments" data-permission="manage_departments">
                            <i class="fas fa-building"></i>
                            <span>Departments</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-page="audit-logs" data-permission="view_audit_logs">
                            <i class="fas fa-clipboard-list"></i>
                            <span>Audit Logs</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-page="settings" data-permission="manage_settings">
                            <i class="fas fa-cog"></i>
                            <span>Settings</span>
                        </a>
                    </li>
                </ul>
            </nav>
            
            <div class="sidebar-footer">
                <div class="user-profile-sidebar">
                    <div class="user-avatar-sidebar">
                        <i class="fas fa-user"></i>
                        <span class="user-avatar-initials" id="userAvatarInitials"></span>
                    </div>
                    <div class="user-info-sidebar">
                        <span class="user-name-sidebar" id="profileUsername">Loading...</span>
                        <span class="user-role-sidebar" id="profileRole">-</span>
                    </div>
                </div>
                <button class="btn btn-secondary btn-sm" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Bar -->
            <header class="top-bar">
                <div class="top-bar-left">
                    <button class="menu-toggle" id="menuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 class="page-title" id="currentPageTitle">Dashboard</h1>
                </div>
                <div class="top-bar-right">
                    <div class="notification-badge" id="notificationBadge">
                        <i class="fas fa-bell"></i>
                        <span class="badge">3</span>
                    </div>
                    <div class="user-dropdown" id="userDropdown">
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <span class="user-name" id="topBarUserName">User Name</span>
                        <i class="fas fa-chevron-down"></i>
                        <!-- User Dropdown Menu -->
                        <div class="dropdown-menu" id="userDropdownMenu">
                            <div class="dropdown-item" id="viewProfileBtn">
                                <i class="fas fa-user-circle"></i>
                                <span>My Profile</span>
                            </div>
                            <div class="dropdown-item" id="sessionManagementBtn">
                                <i class="fas fa-desktop"></i>
                                <span>Active Sessions</span>
                            </div>
                            <div class="dropdown-divider"></div>
                            <div class="dropdown-item" id="logoutBtnHeader">
                                <i class="fas fa-sign-out-alt"></i>
                                <span>Logout</span>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Page Content -->
            <div class="content-wrapper">
                <!-- Dashboard Page -->
                <section class="page active" id="dashboardPage">
                    <div class="welcome-message">
                        <h2>Welcome back, <span id="welcomeUserName">User</span>!</h2>
                        <p>Great to see you again. Here's what's happening with your inventory today.</p>
                    </div>
                    <div class="dashboard-grid">
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon bg-primary">
                                    <i class="fas fa-box"></i>
                                </div>
                                <div class="stat-info">
                                    <h3>Total Products</h3>
                                    <span class="stat-value" id="totalProducts">0</span>
                                </div>
                            </div>
                            <div class="stat-footer">
                                <span class="trend up">
                                    <i class="fas fa-arrow-up"></i>
                                    12% from last month
                                </span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon bg-success">
                                    <i class="fas fa-dollar-sign"></i>
                                </div>
                                <div class="stat-info">
                                    <h3>Total Sales</h3>
                                    <span class="stat-value" id="totalSales">$0.00</span>
                                </div>
                            </div>
                            <div class="stat-footer">
                                <span class="trend up">
                                    <i class="fas fa-arrow-up"></i>
                                    8% from last month
                                </span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon bg-warning">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="stat-info">
                                    <h3>Total Customers</h3>
                                    <span class="stat-value" id="totalCustomers">0</span>
                                </div>
                            </div>
                            <div class="stat-footer">
                                <span class="trend down">
                                    <i class="fas fa-arrow-down"></i>
                                    2% from last month
                                </span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon bg-danger">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <div class="stat-info">
                                    <h3>Low Stock Items</h3>
                                    <span class="stat-value" id="lowStockCount">0</span>
                                </div>
                            </div>
                            <div class="stat-footer">
                                <span class="trend neutral">
                                    <i class="fas fa-equals"></i>
                                    Same as last month
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dashboard-charts">
                        <div class="chart-container">
                            <h3>Sales Overview</h3>
                            <div class="chart-placeholder" id="salesChart">
                                <div class="chart-grid">
                                    <div class="chart-bar" style="height: 70%; background: var(--primary);"></div>
                                    <div class="chart-bar" style="height: 45%; background: var(--primary);"></div>
                                    <div class="chart-bar" style="height: 80%; background: var(--primary);"></div>
                                    <div class="chart-bar" style="height: 60%; background: var(--primary);"></div>
                                    <div class="chart-bar" style="height: 90%; background: var(--primary);"></div>
                                    <div class="chart-bar" style="height: 55%; background: var(--primary);"></div>
                                    <div class="chart-bar" style="height: 75%; background: var(--primary);"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="chart-container">
                            <h3>Recent Activity</h3>
                            <div class="activity-feed" id="activityMonitor">
                                <div class="activity-item">
                                    <div class="activity-icon bg-success">
                                        <i class="fas fa-plus"></i>
                                    </div>
                                    <div class="activity-content">
                                        <h4>New Product Added</h4>
                                        <p>iPhone 13 Pro Max was added to inventory</p>
                                        <span class="activity-time">2 minutes ago</span>
                                    </div>
                                </div>
                                
                                <div class="activity-item">
                                    <div class="activity-icon bg-primary">
                                        <i class="fas fa-shopping-cart"></i>
                                    </div>
                                    <div class="activity-content">
                                        <h4>Sale Completed</h4>
                                        <p>Sale #INV-2023-001 processed successfully</p>
                                        <span class="activity-time">15 minutes ago</span>
                                    </div>
                                </div>
                                
                                <div class="activity-item">
                                    <div class="activity-icon bg-warning">
                                        <i class="fas fa-exclamation-triangle"></i>
                                    </div>
                                    <div class="activity-content">
                                        <h4>Low Stock Alert</h4>
                                        <p>MacBook Pro stock is running low (5 items left)</p>
                                        <span class="activity-time">1 hour ago</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- POS Page -->
                <section class="page" id="posPage" data-page="pos">
                    <div class="pos-container">
                        <div class="pos-left">
                            <div class="pos-products">
                                <div class="filter-bar">
                                    <input type="text" class="search-box" id="productSearch" placeholder="Search products...">
                                    <select class="filter-select" id="categoryFilter">
                                        <option value="">All Categories</option>
                                    </select>
                                </div>
                                <div class="product-grid" id="productGrid">
                                    <!-- Products will be loaded here -->
                                </div>
                            </div>
                        </div>
                        
                        <div class="pos-right">
                            <div class="pos-cart">
                                <div class="cart-header">
                                    <h3>Shopping Cart</h3>
                                    <button class="btn btn-secondary btn-sm" id="clearCartBtn">
                                        <i class="fas fa-trash"></i>
                                        Clear
                                    </button>
                                </div>
                                
                                <div class="cart-items" id="cartItems">
                                    <!-- Cart items will be loaded here -->
                                    <div class="empty-cart">
                                        <i class="fas fa-shopping-cart"></i>
                                        <p>Your cart is empty</p>
                                    </div>
                                </div>
                                
                                <div class="cart-summary">
                                    <div class="summary-row">
                                        <span>Subtotal:</span>
                                        <span id="cartSubtotal">$0.00</span>
                                    </div>
                                    <div class="summary-row">
                                        <span>Tax (<span id="taxRateDisplay">0</span>%):</span>
                                        <span id="cartTax">$0.00</span>
                                    </div>
                                    <div class="summary-row">
                                        <span>Discount:</span>
                                        <span id="cartDiscount">$0.00</span>
                                    </div>
                                    <div class="summary-row total">
                                        <span>Total:</span>
                                        <span id="cartTotal">$0.00</span>
                                    </div>
                                </div>
                                
                                <div class="cart-actions">
                                    <div class="payment-methods">
                                        <button class="payment-btn active" data-method="cash">Cash</button>
                                        <button class="payment-btn" data-method="card">Card</button>
                                        <button class="payment-btn" data-method="credit">Credit</button>
                                    </div>
                                    
                                    <button class="btn btn-primary btn-lg" id="completeSaleBtn">
                                        <i class="fas fa-check-circle"></i>
                                        Complete Sale
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Products Page -->
                <section class="page" id="productsPage" data-page="products">
                    <div class="page-header">
                        <h2>Product Management</h2>
                        <button class="btn btn-primary" id="addProductBtn" data-permission="manage_products">Add Product</button>
                    </div>
                    <div class="filter-bar">
                        <input type="text" id="productSearchInput" class="search-box" placeholder="Search products...">
                        <select id="productCategoryFilter" class="filter-select">
                            <option value="">All Categories</option>
                        </select>
                        <button class="btn btn-secondary" id="exportProductsBtn">
                            <i class="fas fa-file-export"></i>
                            Export
                        </button>
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="productsTable">
                            <thead>
                                <tr>
                                    <th>Product Name</th>
                                    <th>Category</th>
                                    <th>Price</th>
                                    <th>Stock</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="productsBody">
                                <tr><td colspan="6" class="empty-state">No products found</td></tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Categories Page -->
                <section class="page" id="categoriesPage" data-page="categories">
                    <div class="page-header">
                        <h2>Category Management</h2>
                        <button class="btn btn-primary" id="addCategoryBtn" data-permission="manage_categories">Add Category</button>
                    </div>
                    <div class="filter-bar">
                        <input type="text" id="categorySearch" class="search-box" placeholder="Search categories...">
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="categoriesTable">
                            <thead>
                                <tr>
                                    <th>Category Name</th>
                                    <th>Description</th>
                                    <th>Product Count</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="categoriesBody">
                                <tr><td colspan="4" class="empty-state">No categories found</td></tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Customers Page -->
                <section class="page" id="customersPage" data-page="customers">
                    <div class="page-header">
                        <h2>Customer Management</h2>
                        <button class="btn btn-primary" id="addCustomerBtn" data-permission="manage_customers">Add Customer</button>
                    </div>
                    <div class="filter-bar">
                        <input type="text" id="customerSearch" class="search-box" placeholder="Search customers...">
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="customersTable">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Credit Limit</th>
                                    <th>Balance</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="customersBody">
                                <tr><td colspan="6" class="empty-state">No customers found</td></tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Suppliers Page -->
                <section class="page" id="suppliersPage" data-page="suppliers">
                    <div class="page-header">
                        <h2>Supplier Management</h2>
                        <button class="btn btn-primary" id="addSupplierBtn" data-permission="manage_suppliers">Add Supplier</button>
                    </div>
                    <div class="filter-bar">
                        <input type="text" id="supplierSearch" class="search-box" placeholder="Search suppliers...">
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="suppliersTable">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Contact</th>
                                    <th>Email</th>
                                    <th>Phone</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="suppliersBody">
                                <tr><td colspan="5" class="empty-state">No suppliers found</td></tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Credit Sales Page -->
                <section class="page" id="creditPage" data-page="credit">
                    <div class="page-header">
                        <h2>Credit Sales Management</h2>
                    </div>
                    <div class="filter-bar">
                        <input type="text" id="creditSearch" class="search-box" placeholder="Search credit sales...">
                        <select id="creditStatusFilter" class="filter-select">
                            <option value="">All Statuses</option>
                            <option value="pending">Pending</option>
                            <option value="partial">Partial Payment</option>
                            <option value="paid">Paid</option>
                        </select>
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="creditTable">
                            <thead>
                                <tr>
                                    <th>Invoice</th>
                                    <th>Customer</th>
                                    <th>Amount</th>
                                    <th>Paid</th>
                                    <th>Balance</th>
                                    <th>Due Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="creditBody">
                                <tr><td colspan="8" class="empty-state">No credit sales found</td></tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Reports Page -->
                <section class="page" id="reportsPage" data-page="reports">
                    <div class="page-header">
                        <h2>Reports & Analytics</h2>
                    </div>
                    <div class="reports-grid">
                        <div class="report-card">
                            <h3>Sales Report</h3>
                            <p>Detailed sales analytics and trends</p>
                            <button class="btn btn-primary" id="generateSalesReport">Generate Report</button>
                        </div>
                        
                        <div class="report-card">
                            <h3>Inventory Report</h3>
                            <p>Stock levels and movement analysis</p>
                            <button class="btn btn-primary" id="generateInventoryReport">Generate Report</button>
                        </div>
                        
                        <div class="report-card">
                            <h3>Customer Report</h3>
                            <p>Customer purchasing patterns</p>
                            <button class="btn btn-primary" id="generateCustomerReport">Generate Report</button>
                        </div>
                        
                        <div class="report-card">
                            <h3>Profit Report</h3>
                            <p>Revenue and profit margins</p>
                            <button class="btn btn-primary" id="generateProfitReport">Generate Report</button>
                        </div>
                    </div>
                    
                    <div class="report-content" id="reportContent">
                        <div class="empty-state">
                            <i class="fas fa-chart-bar"></i>
                            <p>Select a report to generate</p>
                        </div>
                    </div>
                </section>

                <!-- Transactions Page -->
                <section class="page" id="transactionsPage" data-page="transactions">
                    <div class="page-header">
                        <h2>Inventory Transactions</h2>
                    </div>
                    <div class="filter-bar">
                        <input type="text" id="transactionSearch" class="search-box" placeholder="Search transactions...">
                        <select id="transactionTypeFilter" class="filter-select">
                            <option value="">All Types</option>
                            <option value="restock">Restock</option>
                            <option value="sale">Sale</option>
                            <option value="adjustment">Adjustment</option>
                            <option value="return">Return</option>
                        </select>
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="transactionsTable">
                            <thead>
                                <tr>
                                    <th>Product</th>
                                    <th>Type</th>
                                    <th>Quantity</th>
                                    <th>Date</th>
                                    <th>Notes</th>
                                </tr>
                            </thead>
                            <tbody id="transactionsBody">
                                <tr><td colspan="5" class="empty-state">No transactions found</td></tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Users Page -->
                <section class="page" id="usersPage" data-page="users">
                    <div class="page-header">
                        <h2>User Management</h2>
                        <button class="btn btn-primary" id="addUserBtn" data-permission="manage_users">Add User</button>
                    </div>
                    <div class="filter-bar">
                        <input type="text" id="userSearch" class="search-box" placeholder="Search users by name, username, or email...">
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="usersTable">
                            <thead>
                                <tr>
                                    <th>Username</th>
                                    <th>Full Name</th>
                                    <th>Email</th>
                                    <th>Department</th>
                                    <th>Role</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="usersBody">
                                <tr><td colspan="7" class="empty-state">No users found</td></tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Departments Page -->
                <section class="page" id="departmentsPage" data-page="departments">
                    <div class="page-header">
                        <h2>Department Management</h2>
                        <button class="btn btn-primary" id="addDepartmentBtn">Add Department</button>
                    </div>
                    <div class="filter-bar">
                        <input type="text" id="departmentSearch" class="search-box" placeholder="Search departments...">
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="departmentsTable">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Description</th>
                                    <th>Users</th>
                                    <th>Created</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="departmentsBody">
                                <tr><td colspan="5" class="empty-state">No departments found</td></tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Audit Logs Page -->
                <section class="page" id="auditLogsPage" data-page="audit-logs">
                    <div class="page-header">
                        <h2>Audit Logs</h2>
                    </div>
                    <div class="filter-bar">
                        <input type="text" id="logSearch" class="search-box" placeholder="Search logs...">
                        <select id="logUserFilter">
                            <option value="">All Users</option>
                        </select>
                        <select id="logEntityFilter">
                            <option value="">All Entities</option>
                            <option value="product">Products</option>
                            <option value="category">Categories</option>
                            <option value="customer">Customers</option>
                            <option value="supplier">Suppliers</option>
                            <option value="user">Users</option>
                        </select>
                    </div>
                    <div class="table-container">
                        <table class="data-table" id="auditLogsTable">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Action</th>
                                    <th>Entity</th>
                                    <th>Timestamp</th>
                                    <th>Details</th>
                                </tr>
                            </thead>
                            <tbody id="auditLogsBody">
                                <tr><td colspan="5" class="empty-state">No audit logs found</td></tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Settings Page -->
                <section class="page" id="settingsPage" data-page="settings">
                    <div class="settings-container">
                        <div class="settings-tabs">
                            <button class="settings-tab active" data-tab="basic">Basic Settings</button>
                            <button class="settings-tab" data-tab="advanced">Advanced Settings</button>
                        </div>
                        
                        <div class="settings-content">
                            <form id="settingsForm">
                                <div class="settings-section active" id="basicSettings">
                                    <h3>Basic Settings</h3>
                                    
                                    <div class="form-group">
                                        <label for="companyName">Company Name</label>
                                        <input type="text" id="companyName" placeholder="Enter company name">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="currencySymbol">Currency Symbol</label>
                                        <input type="text" id="currencySymbol" placeholder="$" maxlength="3">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="taxRate">Default Tax Rate (%)</label>
                                        <input type="number" id="taxRate" placeholder="0" min="0" max="100" step="0.1">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="lowStockThreshold">Low Stock Threshold</label>
                                        <input type="number" id="lowStockThreshold" placeholder="10" min="0">
                                    </div>
                                </div>
                                
                                <div class="settings-section" id="advancedSettings">
                                    <h3>Advanced Settings</h3>
                                    
                                    <div class="form-group">
                                        <label for="backupFrequency">Backup Frequency</label>
                                        <select id="backupFrequency">
                                            <option value="daily">Daily</option>
                                            <option value="weekly">Weekly</option>
                                            <option value="monthly">Monthly</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="autoCleanupDays">Auto Cleanup Old Data (Days)</label>
                                        <input type="number" id="autoCleanupDays" placeholder="30" min="1">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="checkbox-container">
                                            <input type="checkbox" id="enableNotifications">
                                            <span class="checkmark"></span>
                                            Enable Email Notifications
                                        </label>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="checkbox-container">
                                            <input type="checkbox" id="enableAuditLogging">
                                            <span class="checkmark"></span>
                                            Enable Detailed Audit Logging
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="form-footer">
                                    <button type="button" class="btn btn-secondary" id="resetSettingsBtn">Reset to Defaults</button>
                                    <button type="submit" class="btn btn-primary">Save Settings</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"><span id="toastMessage"></span></div>

    <!-- Modals -->
    <!-- Product Modal -->
    <div class="modal-overlay" id="productModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="productModalTitle">Add Product</h3>
                <button class="modal-close" id="closeProductModal">&times;</button>
            </div>
            <form id="productForm" class="modal-body">
                <input type="hidden" id="productId">
                <div class="form-row">
                    <div class="form-group">
                        <label for="productName">Product Name *</label>
                        <input type="text" id="productName" required>
                    </div>
                    <div class="form-group">
                        <label for="productCategory">Category *</label>
                        <select id="productCategory" required>
                            <option value="">Select Category</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="productPrice">Price *</label>
                        <input type="number" id="productPrice" step="0.01" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="productStock">Stock Quantity *</label>
                        <input type="number" id="productStock" min="0" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="productDescription">Description</label>
                    <textarea id="productDescription" rows="3"></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="productSKU">SKU</label>
                        <input type="text" id="productSKU">
                    </div>
                    <div class="form-group">
                        <label for="productStatus">Status</label>
                        <select id="productStatus">
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancelProductBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Product</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Category Modal -->
    <div class="modal-overlay" id="categoryModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="categoryModalTitle">Add Category</h3>
                <button class="modal-close" id="closeCategoryModal">&times;</button>
            </div>
            <form id="categoryForm" class="modal-body">
                <input type="hidden" id="categoryId">
                <div class="form-group">
                    <label for="categoryName">Category Name *</label>
                    <input type="text" id="categoryName" required>
                </div>
                <div class="form-group">
                    <label for="categoryDescription">Description</label>
                    <textarea id="categoryDescription" rows="3"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancelCategoryBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Category</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Customer Modal -->
    <div class="modal-overlay" id="customerModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="customerModalTitle">Add Customer</h3>
                <button class="modal-close" id="closeCustomerModal">&times;</button>
            </div>
            <form id="customerForm" class="modal-body">
                <input type="hidden" id="customerId">
                <div class="form-group">
                    <label for="customerName">Full Name *</label>
                    <input type="text" id="customerName" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="customerEmail">Email</label>
                        <input type="email" id="customerEmail">
                    </div>
                    <div class="form-group">
                        <label for="customerPhone">Phone</label>
                        <input type="tel" id="customerPhone">
                    </div>
                </div>
                <div class="form-group">
                    <label for="customerAddress">Address</label>
                    <textarea id="customerAddress" rows="2"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="customerCreditLimit">Credit Limit</label>
                        <input type="number" id="customerCreditLimit" step="0.01" min="0" value="0">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancelCustomerBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Customer</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Supplier Modal -->
    <div class="modal-overlay" id="supplierModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="supplierModalTitle">Add Supplier</h3>
                <button class="modal-close" id="closeSupplierModal">&times;</button>
            </div>
            <form id="supplierForm" class="modal-body">
                <input type="hidden" id="supplierId">
                <div class="form-group">
                    <label for="supplierName">Supplier Name *</label>
                    <input type="text" id="supplierName" required>
                </div>
                <div class="form-group">
                    <label for="supplierContact">Contact Person</label>
                    <input type="text" id="supplierContact">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="supplierEmail">Email</label>
                        <input type="email" id="supplierEmail">
                    </div>
                    <div class="form-group">
                        <label for="supplierPhone">Phone</label>
                        <input type="tel" id="supplierPhone">
                    </div>
                </div>
                <div class="form-group">
                    <label for="supplierAddress">Address</label>
                    <textarea id="supplierAddress" rows="2"></textarea>
                </div>
                <div class="form-group">
                    <label for="supplierNotes">Notes</label>
                    <textarea id="supplierNotes" rows="2"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancelSupplierBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Supplier</button>
                </div>
            </form>
        </div>
    </div>

    <!-- User Modal -->
    <div class="modal-overlay" id="userModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="userModalTitle">Add User</h3>
                <button class="modal-close" id="closeUserModal">&times;</button>
            </div>
            <form id="userForm" class="modal-body">
                <input type="hidden" id="userId">
                <div class="form-group">
                    <label for="userName">Username *</label>
                    <input type="text" id="userName" required>
                </div>
                <div class="form-group">
                    <label for="userFullName">Full Name *</label>
                    <input type="text" id="userFullName" required>
                </div>
                <div class="form-group">
                    <label for="userEmail">Email *</label>
                    <input type="email" id="userEmail" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="userPassword">Password</label>
                        <input type="password" id="userPassword" placeholder="Leave blank to keep current password">
                    </div>
                    <div class="form-group">
                        <label for="userRole">Role *</label>
                        <select id="userRole" required>
                            <option value="cashier">Cashier</option>
                            <option value="manager">Manager</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="userDepartment">Department</label>
                        <select id="userDepartment">
                            <option value="">Select Department</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="userStatus">Status</label>
                        <select id="userStatus" required>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancelUserBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save User</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Department Modal -->
    <div class="modal-overlay" id="departmentModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="departmentModalTitle">Add Department</h3>
                <button class="modal-close" id="closeDepartmentModal">&times;</button>
            </div>
            <form id="departmentForm" class="modal-body">
                <input type="hidden" id="departmentId">
                <div class="form-group">
                    <label for="departmentName">Name *</label>
                    <input type="text" id="departmentName" required>
                </div>
                <div class="form-group">
                    <label for="departmentDescription">Description</label>
                    <textarea id="departmentDescription" rows="3"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancelDepartmentBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Department</button>
                </div>
            </form>
        </div>
    </div>

    <!-- User Permissions Modal -->
    <div class="modal-overlay" id="userPermissionsModal">
        <div class="modal" style="max-width: 800px;">
            <div class="modal-header">
                <h3 id="userPermissionsModalTitle">User Permissions</h3>
                <button class="modal-close" id="closeUserPermissionsModal">&times;</button>
            </div>
            <div class="modal-body" id="userPermissionsModalBody">
                <div class="form-group">
                    <label>User Role: <strong id="userRoleDisplay"></strong></label>
                </div>
                <div class="form-group">
                    <label>Effective Permissions</label>
                    <div id="effectivePermissionsList" style="max-height: 200px; overflow-y: auto; border: 1px solid var(--border-color); padding: 1rem; border-radius: var(--border-radius-sm);">
                        No permissions
                    </div>
                </div>
                <div class="form-group">
                    <label>Individual Permission Overrides</label>
                    <div id="individualPermissionsList" style="max-height: 200px; overflow-y: auto; border: 1px solid var(--border-color); padding: 1rem; border-radius: var(--border-radius-sm);">
                        No individual permissions
                    </div>
                </div>
                <div class="form-group">
                    <button type="button" class="btn btn-primary" id="editUserPermissionsBtn">Edit Permissions</button>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelUserPermissionsBtn">Close</button>
            </div>
        </div>
    </div>

    <!-- Edit Permissions Modal -->
    <div class="modal-overlay" id="editPermissionsModal">
        <div class="modal" style="max-width: 800px;">
            <div class="modal-header">
                <h3>Edit User Permissions</h3>
                <button class="modal-close" id="closeEditPermissionsModal">&times;</button>
            </div>
            <div class="modal-body" id="editPermissionsModalBody">
                <input type="hidden" id="editUserId">
                <div id="permissionsChecklist" style="max-height: 400px; overflow-y: auto;">
                    <!-- Permissions will be loaded here -->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelEditPermissionsBtn">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveUserPermissionsBtn">Save Permissions</button>
            </div>
        </div>
    </div>

    <!-- Session Management Panel -->
    <div class="modal-overlay" id="sessionModal">
        <div class="modal" style="max-width: 600px;">
            <div class="modal-header">
                <h3>Active Sessions</h3>
                <button class="modal-close" id="closeSessionModal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="sessionPanel">
                    <p class="empty-state">Loading sessions...</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="closeSessionPanelBtn">Close</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/js/app.js"></script>
    <script src="/js/multiuser.js"></script>
    <script src="/js/departments.js"></script>
</body>
</html>